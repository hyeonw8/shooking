# 🛍 shooking - 상품 목록 페이지

작성자: hyeon (개인 프로젝트)

## 프로젝트 개요

shooking은 20~30대 젊은 세대를 타깃으로 한 패션 브랜드로,
주력 상품은 신발입니다.

본 프로젝트는 shooking 브랜드의 쇼핑몰 웹사이트를 구현하는 작업으로,
이미지 중심의 직관적인 상품 탐색 경험을 목표로 합니다.

주요 사용자층의 스마트폰 이용 비중을 고려해 모바일 퍼스트 설계를 적용했으며,
모바일 환경에 최적화된 구조를 중심으로 구현했습니다.

---

### 주요 기능
- **상품 목록 카드 렌더링**
  - 상품 이미지, 브랜드명, 설명, 가격 정보를 카드 형태로 표시
  - 모바일 퍼스트 기반 2열 Grid 구성
    - (웹에서는 3~4열 반응형 확장)
  - 이미지 중심 레이아웃으로 직관적인 탐색 경험 제공

- **상품 담기 / 해제 토글 기능**
  - 각 상품 카드에 장바구니 담기 버튼 제공
  - 버튼 클릭 시 해당 상품을 장바구니에 추가 또는 제거
  - 담김 여부에 따라 버튼 UI(텍스트 및 스타일) 동적으로 변경

- **헤더 장바구니 수량 실시간 반영**
  - 전역 상태(Context + useReducer) 기반 장바구니 관리
  - 상품 담기/해제 시 헤더의 장바구니 수량 즉시 업데이트
  - 담긴 상품이 있을 때만 수량 뱃지 노출


## 프로젝트 구조 요약
- UI 레이어와 상태 관리 레이어를 분리하여 구조 설계
- Context + useReducer 기반 전역 상태 관리
- reducer를 순수 함수로 분리하여 테스트 가능한 구조를 확보
- 단위 테스트 + 사용자 흐름 기반 통합 테스트 구성

---

## 개발 환경
**Runtime**
- Node.js v20+

**Frontend**
- React 19 (Vite 기반)
-	JavaScript (ES6+)
- Tailwind CSS

**State Management**
- Context API + useReducer(추후 Recoil로 교체)

**Testing**
- Vitest
- jsdom
- React Testing Library
  - @testing-library/react
  - @testing-library/user-event
  - @testing-library/dom
  - @testing-library/jest-dom

**Deployment**
- GitHub Pages
- GitHub Actions

---

## 설치 및 실행 방법

1) 패키지 설치 (노드 버전 20 이상 권장)
```
yarn install
```
2) 개발 서버 실행
```
yarn dev
```
3) 프로덕션 빌드
```
yarn build
```
4) 빌드 결과 미리보기
```
yarn preview
```

---

## 컴포넌트 구조

### **페이지/레이아웃 흐름**
```
Home
 ├── Header
 │    └── CartButton
 │         ├── CartIcon
 │         └── CartCountBadge
 ├── ProductListHeader
 └── ProductList
      └── ProductCard
           └── ToggleToCartButton
```
### **주요 컴포넌트 설명**

`Home`
- 전체 레이아웃 구성
- `totalCount`(상품 개수)를 계산하여 `ProductListHeader`로 전달

`ProductListHeader`
- 페이지 제목 표시
- 전체 상품 수 노출

`ProductList`
- 상품 목록을 Grid 형태로 렌더링
- 모바일 2열 / 웹 3~4열 반응형 구성

`ProductCard`
- 상품 이미지 / 브랜드 / 설명 / 가격 표시
- `ToggleToCartButton` 포함

`ToggleToCartButton`
- 장바구니 담기 / 해제 토글 기능
- 상태에 따라 버튼 텍스트 및 스타일 동적 변경

`Header` / `CartButton` / `CartCountBadge`
- 헤더에 장바구니 버튼 렌더링
- `cartCount > 0`일 때만 수량 뱃지 노출
- 테스트 안정성을 위해 뱃지에 `aria-label="cart-count"` 적용

---

## 전역 상태 구조 (Cart)

### 1. Context 구조

#### CartContext
- `CartStateContext`
  - 장바구니 상태 제공
- `CartDispatchContext`
  - dispatch 함수 제공

#### CartProvider
- `useReducer(cartReducer, initialState)` 기반 상태 관리
- `cartIds` 배열을 기준으로 파생 상태 생성
  - `cartSet` : `Set` 자료구조로 변환하여 `has()` 기반으로 조회 성능 최적화
  - `cartCount` : 장바구니 수량 계산 값 제공
- 상태와 dispatch를 각각 Context로 분리하여 제공


### 2. cartReducer

- `toggle` 액션을 통해 상품 `id` 추가 / 제거
- 기존 state를 직접 수정하지 않고 **불변성 유지**
- 항상 새로운 state 객체를 반환하여 예측 가능한 상태 흐름 보장

---

## 테스트 방법

### 테스트 실행

#### 1) 테스트 실행 (Watch 모드)

```
yarn test
```
파일 변경 시 자동으로 테스트가 다시 실행됩니다.

#### 2) CI용 1회 실행
```
yarn test:run
```
watch 없이 한 번만 실행되며, CI 환경에서 사용합니다.

### 테스트 범위
#### 1. cartReducer 단위 테스트

- `toggle` 액션으로 id 추가 동작 검증
- 이미 존재하는 id 제거 동작 검증
- 알 수 없는 action type 처리 검증 (기존 state 반환)
- 상태 불변성 유지 검증 (기존 state 직접 변경하지 않음)
- 여러 개 id 중 특정 id 제거 검증
- 문자열 id 처리 가능 여부 검증


#### 2. CartCountBadge 컴포넌트 테스트

- `cartCount === 0`일 경우 렌더링되지 않음
- `cartCount > 0`일 경우 뱃지 렌더링
- `aria-label="cart-count"` 기반으로 수량 값 정확히 검증


#### 3. ToggleToCartButton 인터랙션 테스트

- 초기 상태에서 “담기” 버튼 표시
- 클릭 시 “담김!” 상태로 변경
- 다시 클릭 시 “담기” 상태로 복원


#### 4. Home 통합 흐름 테스트

- 상품 “담기” 클릭 시 헤더 장바구니 뱃지 수량 증가 확인
- 동일 상품 재클릭 시 장바구니 해제 및 뱃지 제거 확인
- 실제 전역 상태(Context + useReducer)를 기반으로 한 사용자 흐름 검증

---

## 유의사항 및 알려진 이슈

- 현재 상품 데이터는 **mock 데이터 기반**으로 구성되어 있습니다.
- 추후 API 연동을 통해 상품 데이터를 동적으로 불러오도록 확장할 예정입니다.
- 장바구니 상태는 브라우저를 새로고침할 경우 초기화됩니다. (추후 로컬 스토리지 또는 서버 연동으로 개선 가능)

---

## 향후 개발 예정

- 장바구니 페이지 구현
- 결제 모듈 구현
- 전체 쇼핑몰 기능 통합

## 추가 항목
- 상태 관리 (Context API) 참고  
  https://www.heropy.dev/p/EdhHX2

- GitHub Pages 공식 문서  
  https://docs.github.com/ko/pages/getting-started-with-github-pages/creating-a-github-pages-site

- GitHub Pages Custom Workflow (GitHub Actions)  
  https://docs.github.com/ko/pages/getting-started-with-github-pages/using-custom-workflows-with-github-pages